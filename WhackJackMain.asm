CSEG AT 0H
PLAYER:
JNB P0.0,PLAYER
PLAYERINIT:
MOV A,#00BH ; intialisiere R0 mit 11
LJMP PLAYERSTEP
PLAYERSTEP:
JNB P0.0,PLAYERSAFE
JNB P0.1,ENDGAME
DJNZ A,PLAYERSTEP ; schleife die Input pr√ºft und dekrementiert
LJMP PLAYERINIT
PLAYERSAFE:
ADD A,R0
MOV R0, A
CALL CHECKPLAYERLOSE
LJMP BANK

BANK:
JB P0.0,BANK
CALL CHECKBANKWIN
BANKINIT:
MOV A,#00BH
LJMP BANKSTEP
BANKSTEP:
JB P0.0,BANKSAFE
DJNZ A,BANKSTEP
LJMP BANKINIT
BANKSAFE:
ADD A,R1
MOV R1, A
CALL CHECKBANKLOSE
LJMP PLAYERINIT

ENDGAME:
JNB P0.0,INITENDGAME
INITENDGAME:
MOV A,#00BH
LJMP ENDGAMESTEP
ENDGAMESTEP:
JB P0.0,ENDGAMESAFE
DJNZ A,ENDGAMESTEP
LJMP INITENDGAME
ENDGAMESAFE:
ADD A,R1
MOV R1, A
CALL CHECKBANKLOSE
CALL CHECKENDGAME
LJMP ENDGAME

CHECKENDGAME:
CLR C 
MOV A, R0
MOV B, R1
SUBB A,B
JB C, LOSE

CHECKPLAYERLOSE:
CLR C 
SUBB A, #015H
JNB C, LOSE
CLR C 
ret

CHECKBANKLOSE:
CLR C 
SUBB A, #015H
JNB C, WIN
CLR C 
ret

CHECKBANKWIN:
CLR C 
MOV A, R0
MOV B, R1
SUBB A,B
JB C, PLAYERINIT
ret

WIN:
NOP 

LOSE:
NOP
